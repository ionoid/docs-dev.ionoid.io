(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{355:function(t,e,a){"use strict";a.r(e);var n=a(44),s=Object(n.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"iot-apps-basic-examples"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#iot-apps-basic-examples"}},[t._v("#")]),t._v(" IoT Apps Basic Examples")]),t._v(" "),a("h2",{attrs:{id:"overview"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#overview"}},[t._v("#")]),t._v(" Overview")]),t._v(" "),a("p",[t._v("Ionoid IoT Platform supports simple IoT Apps that can run on any Linux and\nintegrated with ionoid.io.")]),t._v(" "),a("p",[t._v("Ionoid IoT Apps take "),a("a",{attrs:{href:"https://docs.snapcraft.io/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Snapcraft"),a("OutboundLink")],1),t._v(" the universal\napp store for Linux as a reference, and build on top of it.")]),t._v(" "),a("h3",{attrs:{id:"_1-general-concept"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-general-concept"}},[t._v("#")]),t._v(" 1. General concept")]),t._v(" "),a("p",[t._v("This section provides a basic view of IoT Apps and how to deploy them.")]),t._v(" "),a("p",[t._v("Ionoid IoT Apps are apps that are self-contained with all their metadata\nincluded.")]),t._v(" "),a("h3",{attrs:{id:"_2-tools-steps-to-generate-an-app"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-tools-steps-to-generate-an-app"}},[t._v("#")]),t._v(" 2. Tools/Steps to generate an App")]),t._v(" "),a("p",[t._v("1- To be able to create a compatible App you will need pieman to generate\nthe environment for the App, e.g. Alpine Linux.")]),t._v(" "),a("p",[t._v("2- Change root (chroot) into the generated environment, this basically ables you\nto execute commands inside the environment to install dependency like Python\nor Node.js packages.")]),t._v(" "),a("p",[t._v("3- Copy your App into the chroot environment.")]),t._v(" "),a("p",[t._v("4- Create a YAML file that contains your app's configuration needed by our OS manager\nto execute your app, YAML file needs to be copied into the chroot environment at the root\nlevel (/).")]),t._v(" "),a("p",[t._v("Follow the next section for a step-by-step tutorial to generate your first app.")]),t._v(" "),a("h2",{attrs:{id:"prepare-alpine-linux-environment"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#prepare-alpine-linux-environment"}},[t._v("#")]),t._v(" Prepare Alpine Linux Environment.")]),t._v(" "),a("p",[t._v("This section describes how to set up your work environment to build runtime for your IoT apps. You must use Linux.\nFor building under macOS or Windows see Docker section.")]),t._v(" "),a("blockquote",[a("p",[t._v("We are using "),a("a",{attrs:{href:"https://github.com/tolstoyevsky/pieman",target:"_blank"}},[t._v(" Pieman ")]),t._v(", a script for creating OS images for single-board computers such as Raspberry Pi.")])]),t._v(" "),a("p",[t._v("The procedure to Prepare Alpine Linux Environment is as follow:")]),t._v(" "),a("blockquote",[a("p",[a("a",{attrs:{href:"https://alpinelinux.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Alpine Linux"),a("OutboundLink")],1),t._v(" is a security-oriented, lightweight Linux distribution based on musl libc and busybox.")])]),t._v(" "),a("ol",[a("li",[t._v("Installing dependencies.")]),t._v(" "),a("li",[t._v("Clone Pieman git repository.")]),t._v(" "),a("li",[t._v("Installing Pieman required python modules.")])]),t._v(" "),a("h3",{attrs:{id:"preparing-your-build-environment-on-gnu-linux"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#preparing-your-build-environment-on-gnu-linux"}},[t._v("#")]),t._v(" Preparing your build environment on GNU/Linux")]),t._v(" "),a("p",[t._v("To prepare your build environment several prerequisites for working with pieman must be installed, obtain the following tools if you haven't done so already.")]),t._v(" "),a("h3",{attrs:{id:"_1-installing-dependencies"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-installing-dependencies"}},[t._v("#")]),t._v(" 1. Installing dependencies")]),t._v(" "),a("ul",[a("li",[t._v("To install dependencies on Debian/Ubuntu distribution open a terminal and  run the following command.")])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("apt-get")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" dosfstools gnupg pandoc "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("parted")]),t._v(" python3-pip python3-setuptools python3-yaml qemu-user-static "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("rsync")]),t._v(" uuid-runtime "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("wget")]),t._v(" whois\n")])])]),a("ul",[a("li",[t._v("To install dependencies on Fedora distribution open a terminal run and the following command.")])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" dnf "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" dosfstools dpkg "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("expect")]),t._v(" gpg pandoc "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("parted")]),t._v(" python3-pip python3-PyYAML python3-setuptools qemu-user-static "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("rsync")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("wget")]),t._v("\n")])])]),a("h3",{attrs:{id:"_2-clone-pieman-git-repository"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-clone-pieman-git-repository"}},[t._v("#")]),t._v(" 2. Clone Pieman git repository.")]),t._v(" "),a("ul",[a("li",[t._v("To get Pieman run the following command.")])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" clone https://github.com/tolstoyevsky/pieman.git\n")])])]),a("h3",{attrs:{id:"_3-install-the-pieman-required-python-modules"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-install-the-pieman-required-python-modules"}},[t._v("#")]),t._v(" 3. Install the pieman required python modules.")]),t._v(" "),a("ul",[a("li",[t._v("To install Pieman required python modules run the following command.")])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" pip3 "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" pieman\n")])])]),a("h2",{attrs:{id:"building-a-basic-runtime-based-on-alpine-linux-quickly"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#building-a-basic-runtime-based-on-alpine-linux-quickly"}},[t._v("#")]),t._v(" Building a basic runtime based on Alpine Linux quickly.")]),t._v(" "),a("p",[t._v("This section describes how to build a runtime based on Alpine Linux distribution, to be able to run IoT apps the ionoid.io IoT way.")]),t._v(" "),a("p",[t._v("The procedure to build Alpine Linux runtime is as follows:")]),t._v(" "),a("ol",[a("li",[t._v("Build a runtime.")]),t._v(" "),a("li",[t._v("Configure Alpine package manager.")]),t._v(" "),a("li",[t._v("Build runtime tarball.")])]),t._v(" "),a("h3",{attrs:{id:"_1-building-a-basic-runtime"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-building-a-basic-runtime"}},[t._v("#")]),t._v(" 1. Building a basic runtime.")]),t._v(" "),a("ul",[a("li",[t._v("Open a terminal and change directory into "),a("strong",[t._v("pieman")]),t._v(" directory.")])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" pieman\n")])])]),a("ul",[a("li",[t._v("To build the runtime run the following command .")])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("env")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("PROJECT_NAME")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"MyRuntime"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("DEVICE")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("rpi-3-b "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("OS")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("alpine-3.9-armhf "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("CREATE_ONLY_CHROOT")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("true ./pieman.sh\n")])])]),a("ul",[a("li",[t._v("The runtime is created for a specific device, use "),a("strong",[t._v("DEVICE")]),t._v(" environment variable to adapt the runtime to your device,  see the table below.")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"center"}},[t._v("Device Full name")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("Device Short name")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("Raspberry Pi Model B and B+")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("rpi-b")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("Raspberry Pi 2 Model B")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("rpi-2-b")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("Raspberry Pi 3 Model B")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("rpi-3-b")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("Raspberry Pi Zero")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("rpi-zero")])])])]),t._v(" "),a("blockquote",[a("p",[t._v("To change the name of the runtime use "),a("strong",[t._v("PROJECT_NAME")]),t._v(" variable.")])]),t._v(" "),a("ul",[a("li",[t._v("You will find the built runtime  at "),a("strong",[t._v("build")]),t._v(" directory.")])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ls")]),t._v(" build/\n")])])]),a("p",[t._v('Sample output will be as we set on pieman command PROJECT_NAME="MyRuntime":')]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[t._v("MyRuntime\n")])])]),a("h3",{attrs:{id:"_2-configure-alpine-linux-package-manager"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-configure-alpine-linux-package-manager"}},[t._v("#")]),t._v(" 2. Configure Alpine Linux package manager.")]),t._v(" "),a("p",[t._v("To be able to add packages to our runtime, we have to configure the package manager.")]),t._v(" "),a("ul",[a("li",[t._v("Enter the runtime, using the following command.")])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("chroot")]),t._v(" build/MyDistro/chroot/ /bin/sh -l\n")])])]),a("blockquote",[a("p",[t._v("Every command inside the runtime is executed as root.")])]),t._v(" "),a("ul",[a("li",[t._v("Run the following command to setup the Alpine Linux packages repository.")])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("setup-apkrepos\n")])])]),a("p",[t._v("Sample output :")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("Available mirrors:\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" dl-cdn.alpinelinux.org\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" nl.alpinelinux.org\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" uk.alpinelinux.org\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" dl-2.alpinelinux.org\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" dl-3.alpinelinux.org\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("6")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" dl-4.alpinelinux.org\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("7")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" dl-5.alpinelinux.org\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("8")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" dl-8.alpinelinux.org\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("9")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" mirror.yandex.ru\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" mirrors.gigenet.com\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("11")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" mirror1.hs-esslingen.de\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("12")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" mirror.leaseweb.com\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" mirror.fit.cvut.cz\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("14")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" alpine.mirror.far.fi\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("15")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" alpine.mirror.wearetriple.com\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n\nr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" Add random from the above list\nf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" Detect and "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" fastest mirror from the above list\ne"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" Edit /etc/apk/repositories with a text editor\n\nEnter mirror number "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("-44"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" or URL to "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("or r/f/e/done"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("f"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(":\n")])])]),a("ul",[a("li",[a("p",[t._v("Choose a number , 8 for example.")])]),t._v(" "),a("li",[a("p",[t._v("To exit from the runtime environment type "),a("strong",[t._v("exit")]),t._v(".")])])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("exit")]),t._v("\n")])])]),a("h2",{attrs:{id:"conclusion"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#conclusion"}},[t._v("#")]),t._v(" Conclusion")]),t._v(" "),a("p",[t._v("Congratulation, now you have an exploitable environment, in the next section,\nwe will create our first basic python app.")])])}),[],!1,null,null,null);e.default=s.exports}}]);